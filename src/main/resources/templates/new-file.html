<!DOCTYPE html>
<html>
    <head>
        <title>文档列表-添加新文档</title>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <!-- bootstrap -->
        <link rel="stylesheet" type="text/css" href="../static/css/bootstrap/bootstrap.css"/>
        <link rel="stylesheet" type="text/css" href="../static/css/bootstrap/bootstrap-overrides.css"/>

        <!-- global styles -->
        <link rel="stylesheet" type="text/css" href="../static/css/compiled/layout.css"/>
        <link rel="stylesheet" type="text/css" href="../static/css/compiled/elements.css"/>
        <link rel="stylesheet" type="text/css" href="../static/css/compiled/icons.css"/>

        <!-- libraries -->
        <link rel="stylesheet" type="text/css" href="../static/css/lib/font-awesome.css"/>

        <!-- this page specific styles -->
        <link rel="stylesheet" type="text/css" media="screen" href="../static/css/compiled/new-user.css"/>

        <!-- open sans font -->
        <!--<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,800italic,400,300,600,700,800'/>-->

        <!-- choose deep color skin in nav -->
        <link rel="stylesheet" type="text/css" id="skin-file" href="../static/css/compiled/skins/dark.css">

        <!--[if lt IE 9]-->
        <!--<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>-->

        <!-- scripts -->
        <script src="../static/js/jquery.min.js"></script>
        <script src="../static/js/bootstrap/bootstrap.min.js"></script>
        <script src="../static/js/jquery-ui-1.10.2.custom.min.js"></script>
    </head>
    <body>
        <!-- navbar -->
        <header class="navbar navbar-inverse" role="banner">
            <div class="navbar-header">
                <a class="navbar-brand" href="/admin-home"><h2>Ji Admin</h2></a>
            </div>
            <ul class="nav navbar-nav pull-right hidden-xs">
                <li class="dropdown">
                    <a id="a-username" href="#" class="dropdown-toggle hidden-xs hidden-sm" data-toggle="dropdown">
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#">个人信息</a></li>
                        <li><a href="#">账号设置</a></li>
                    </ul>
                </li>
                <li class="settings hidden-xs hidden-sm">
                    <a href="#" role="button">
                        <i class="icon-cog"></i>
                    </a>
                </li>
                <li class="settings hidden-xs hidden-sm">
                    <a href="#" role="button">
                        <i class="icon-share-alt"></i>
                    </a>
                </li>
            </ul>
        </header>
        <!-- end navbar -->

        <!-- sidebar -->
        <div id="sidebar-nav">
            <ul id="dashboard-menu">
                <li>
                    <a href="/admin-home">
                        <i class="icon-home"></i>
                        <span>首页</span>
                    </a>
                </li>
                <li>
                    <a class="dropdown-toggle" href="#">
                        <i class="icon-group"></i>
                        <span>用户</span>
                        <i class="icon-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="/sys-user">系统用户列表</a></li>
                        <li><a href="/role">用户角色列表</a></li>
                    </ul>
                </li>
                <li class="active">
                    <div class="pointer">
                        <div class="arrow"></div>
                        <div class="arrow_border"></div>
                    </div>
                    <a class="dropdown-toggle" href="#">
                        <i class="icon-file"></i>
                        <span>文档</span>
                        <i class="icon-chevron-down"></i>
                    </a>
                    <ul class="active submenu">
                        <li><a href="/file" class="active">文档列表</a></li>
                        <li><a href="/folder">文件夹列表</a></li>
                    </ul>
                </li>
                <li>
                    <a class="dropdown-toggle" href="#">
                        <i class="icon-edit-sign"></i>
                        <span>账目</span>
                        <i class="icon-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="account-list.html">账目列表</a></li>
                        <li><a href="acc-type-list.html">账目类型列表</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- end sidebar -->

        <!-- main container -->
        <div class="content">
            <div id="pad-wrapper" class="new-user">
                <div class="row head">
                    <div class="col-md-12">
                        <h4>添加新文档</h4>
                    </div>
                </div>

                <!-- start new user -->
                <div class="row form-wrapper">
                    <!-- left column -->
                    <div class="col-md-9 with-sidebar">
                        <div class="container">
                            <form class="new_user_form">
                                <div class="col-md-12 field-box">
                                    <label>题目</label>
                                    <input id="inputTitle" class="form-control" type="text" placeholder="输入题目"/>
                                </div>
                                <div class="col-md-12 field-box textarea">
                                    <label>内容</label>
                                    <textarea id="inputContent" class="col-md-9"></textarea>
                                    <span class="charactersleft">请输入内容</span>
                                </div>
                                <div class="col-md-12 field-box">
                                    <label>归属文件夹Id</label>
                                    <input id="inputFolderId" class="form-control" type="text" placeholder="输入归属文件夹Id"/>
                                </div>
                                <div class="col-md-12 field-box">
                                    <label>创建帐号</label>
                                    <input id="inputCreateAccount" class="form-control" type="text" placeholder="输入创建帐号"/>
                                </div>
                                <div class="col-md-12 field-box">
                                    <label>状态</label>
                                    <div class="ui-select span5">
                                        <select id="statusSelect">
                                            <option value="y">启用</option>
                                            <option value="n">停用</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-11 field-box actions">
                                    <button id="save_btn" type="button" class="btn primary">
                                        <span class="glyphicon glyphicon-save" aria-hidden="true"></span>保存
                                    </button>
                                    <span>OR</span>
                                    <input type="reset" value="重置" class="reset">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end new user -->
            </div>
        </div>

        <script src="../static/js/theme.js"></script>
        <!-- knob -->
        <script src="../static/js/jquery.knob.js"></script>
        <!-- import common-utils js-->
        <script src="../static/js/common-utils.js"></script>
        <script src="../static/js/ji-validate.js"></script>
        <script type="text/javascript">
            //显示当前系统用户名
            var str = sessionStorage.getItem("sys-user");
            var user = JSON.parse(str);
            $("#a-username").text("hello!   " + user.result.username);

            //保存新文档
            $("#save_btn").click(function(){
                $.ajax({
                    type: "POST",
                    url: "/file/save",
                    data: JSON.stringify ({
                        "title": $("#inputTitle").val(),
                        "content": $("#inputContent").val(),
                        "folderId": $("#inputFolderId").val(),
                        "createAccount": $("#inputCreateAccount").val(),
                        "createTime": new Date(),
                        "status": $("#statusSelect").find("option:selected").val()
                    }),
                    contentType: "application/json;charset=UTF-8",
                    dataType: 'json',
                    success: function(data){
                        if (data.code == 200) {
                            alert("保存成功！");
                            window.location.href = "/file";
                        } else {
                            alert("保存失败！");
                        }
                    }
                });
            });
        </script>
    </body>
</html>